````instructions
# GitHub Copilot Instructions

このプロジェクトは「おやつ英語」という英語学習アプリケーションです。以下のガイドラインに従ってコード提案を行ってください。

## プロジェクト概要
- **技術スタック**: Next.js 14, TypeScript, Tailwind CSS, Jotai
- **目的**: 英語単語学習ゲーム
- **ターゲット**: 日本語話者の英語学習者

## コーディングスタイル

### TypeScript
- 厳格な型定義を使用する
- any型の使用を避ける
- インターフェースよりtype aliasを優先する
- 関数コンポーネントはアロー関数で定義する

### React/Next.js
- "use client"ディレクティブを適切に使用する
- Server ComponentsとClient Componentsを適切に使い分ける
- カスタムフックでロジックを分離する
- forwardRefを使用してrefを適切に転送する

### CSS/Tailwind
- Tailwind CSSクラスを使用する
- cn()関数でクラス名を結合する
- レスポンシブデザインを考慮する
- アクセシビリティを重視する

### 状態管理
- Jotaiを使用してグローバル状態を管理する
- atomは単一責任の原則に従う
- computed atomで派生状態を定義する

## ファイル構造
```
src/
├── app/          # App Router
├── components/   # 再利用可能なコンポーネント
├── lib/          # ユーティリティ関数
├── store/        # Jotai atoms
├── types/        # TypeScript型定義
└── data/         # 静的データ
```

## 命名規則
- **ファイル名**: kebab-case（例: `play-page.tsx`）
- **コンポーネント名**: PascalCase（例: `PlayPage`）
- **関数名**: camelCase（例: `handleAnswer`）
- **定数**: UPPER_SNAKE_CASE（例: `GAME_DURATION`）
- **atom名**: camelCase + "Atom"接尾辞（例: `scoreAtom`）

## 特別な考慮事項

### 国際化
- UIテキストは日本語で記述する
- エラーメッセージも日本語で表示する
- 英語は学習コンテンツとしてのみ使用する

### パフォーマンス
- 大きなデータセット（単語リスト）の処理に注意する
- useMemoとuseCallbackを適切に使用する
- 不要な再レンダリングを避ける

### アクセシビリティ
- キーボードナビゲーションをサポートする
- 適切なARIAラベルを使用する
- カラーコントラストを考慮する

## 避けるべきパターン
- console.logの本番環境への残存
- ハードコーディングされた値
- 未処理のエラー
- 型安全性を損なうany型の使用
- 過度に複雑なコンポーネント
- **テストが失敗している状態でのリファクタリング**
- 機能追加とリファクタリングの同時実行
- テストなしでの既存コード変更

## 推奨パターン
- 小さな、再利用可能なコンポーネント
- カスタムフックでのロジック分離
- エラーバウンダリの実装
- 適切なローディング状態の表示
- ユーザーフィードバックの提供
- **テストファースト**でのコード実装
- **Red-Green-Refactor**サイクルの遵守
- 段階的で安全なリファクタリング

## コメント
- 複雑なビジネスロジックには日本語でコメントを追加
- TODO、FIXME、NOTEコメントを適切に使用
- 型定義には必要に応じてJSDocを追加

## 開発手法

### TDD（テスト駆動開発）
- 機能の追加や修正時はケント・ベック氏提唱のTDDサイクルに従う
- **Red → Green → Refactor**のサイクルを厳守する
- 小刻みなテストを実施し、段階的に機能を構築する
- テストが**Red**（失敗）の状態では**リファクタリングを禁止**する
- まず失敗するテストを書き、最小限のコードで通すことを優先する

### リファクタリング
- マーチン・ファウラー氏提唱の手順に従って実施する
- リファクタリング前に**テストがすべてGreen**（成功）であることを確認
- 小さなステップで進め、各ステップ後にテストを実行
- 機能追加とリファクタリングを**同時に行わない**
- リファクタリング時は外部から見た動作を変更しない

### テスト戦略
- 単体テスト（jest/vitest）を優先的に実装
- コンポーネントテスト（@testing-library/react）でUI動作を検証
- カスタムフックのテストを独立して作成
- atomの状態変更ロジックをテスト対象にする
````
